!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){document.body.addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1});var i=document.querySelector("#canvas"),r=document.querySelector(".stage"),n=(window.screen.availHeight,i.getContext("2d")),o=new Image;o.src="./preloadsheet.png";var a={stageWidth:r.offsetWidth,stageHeight:r.offsetHeight,score:0,center:{x:r.offsetWidth/2,y:r.offsetHeight/2}};function s(){n.fillStyle="#eaeaea",n.fillRect(0,0,a.stageWidth,a.stageHeight)}i.width=a.stageWidth,i.height=a.stageHeight;var h=["#FFC09F","#25C6FC","#DE8100","#04DD98","#7C6354","#C5FF24","#E93C07","#F8FB6C","#FF13FE","#FF4238","#322105","#007850","#FF9966","#FF6666","#99CCFF","#666633","#6699CC","#CCCCFF","#CC3399","#66CCCC","#CC0066"];function c(e,t,i,r,o){n.beginPath(),n.arc(e,t,i,0,2*Math.PI),n.closePath(),o?(n.fillStyle=r,n.fill()):(n.strokeStyle=r,n.stroke())}function f(){return h[Math.round(Math.random()*h.length)]}var l={r:50,maxR:50,minR:40,zoom:!0,color:f()},g={r:30,maxR:30,minR:20,zoom:!0,color:f()};function u(e){e.zoom?(e.r-=.5,e.zoom=!(e.r<=e.minR)):(e.r+=.5,e.zoom=e.r>=e.maxR)}var d={name:"start_btn_png",width:a.stageWidth/2,height:file.start_btn_png.h/file.start_btn_png.w*a.stageWidth/2,x:(a.stageWidth-a.stageWidth/2)/2,y:a.stageHeight/2+60},y=(a.stageWidth,file.arrow_png.h,file.arrow_png.w,a.stageWidth,a.stageWidth,a.stageWidth,a.stageHeight,{name:"balance_base_bg_png",width:a.stageWidth,height:file.balance_base_bg_png.h/file.balance_base_bg_png.w*a.stageWidth,x:(a.stageWidth-a.stageWidth)/2,y:a.stageHeight/2-150}),p={name:"again_btn_png",width:a.stageWidth/3,height:file.again_btn_png.h/file.again_btn_png.w*a.stageWidth/3,x:(a.stageWidth-a.stageWidth/3)/2-80,y:a.stageHeight/3+300};function x(e){n.drawImage(o,file[e.name].x,file[e.name].y,file[e.name].w,file[e.name].h,e.x,e.y,e.width,e.height)}function m(){u(l),u(g),c(a.center.x-l.minR,a.center.y-l.maxR,l.r,l.color,!0),c(a.center.x+g.minR,a.center.y-g.maxR,g.r,g.color,!0),x(d)}function v(e,t){return Math.round(Math.random()*(t-e)+e)}function b(e,t){this.r=v(e,t),this.color=f()}function W(e,t){return Math.random()*(t-e)+e}b.prototype.enemyBoll=function(){switch(v(0,3)){case 0:this.x=v(-this.r,a.stageWidth+this.r),this.y=-this.r;break;case 1:this.x=a.stageWidth+this.r,this.y=v(-this.r,a.stageHeight+this.r);break;case 2:this.x=v(-this.r,a.stageWidth+this.r),this.y=a.stageWidth+this.r;break;case 3:this.x=-this.r,this.y=v(-this.r,a.stageHeight+this.r)}};function _(){this.x=a.center.x,this.y=a.center.y,this.r=6,this.die=!1,this.color=f(),this.nature={r:this.r,maxR:this.r+8,minR:this.r,zoom:!0,color:f()}}b.prototype.enemySpeed=function(){this.x>a.stageWidth&&(this.speedx=-W(0,3),this.speedy=W(-3,3)),this.x<0&&(this.speedx=W(0,3),this.speedy=W(-3,3)),this.y<0&&(this.speedx=W(-3,3),this.speedy=W(0,3)),this.y>a.stageHeight&&(this.speedx=W(-3,3),this.speedy=-W(0,3))},b.prototype.move=function(){this.x=this.x+this.speedx,this.y=this.y+this.speedy},b.prototype.cheakBoll=function(){var e=this.x>a.stageWidth+this.r,t=this.x<-this.r,i=this.y<-this.r,r=this.y>a.stageHeight+this.r;this.okOver=e||t||i||r};var S=new _;var w=[],C=0;function F(){if(++C%4==0){var e=new b(S.r-4,S.r+20);e.enemyBoll(),e.enemySpeed(),w.push(e)}w.forEach((function(e,t){if(e.move(),c(e.x,e.y,e.r,e.color,!0),function(e){if(Math.sqrt(Math.pow(e.x-S.x,2)+Math.pow(e.y-S.y,2))<e.r+S.r)return!0}(e))if(e.r>S.r)S.die=!0,clearInterval(R),function(){var e=a.score;if(localStorage.score)for(var t=JSON.parse(localStorage.score),i=0;i<t.length;i++)for(key in t[i])H+=t[i][key],key<e&&(M+=t[i][key])}(),function(){var e=a.score;if(localStorage.score){for(var t=JSON.parse(localStorage.score),i=0;i<t.length;i++)for(key in t[i])if(key==e)return t[i][key]++,void(localStorage.score=JSON.stringify(t));var r={};r[e]=1,t.push(r),localStorage.score=JSON.stringify(t)}else{var n={};n[e]=1,localStorage.score=JSON.stringify([n])}}(),setTimeout((function(){var e=(M/H*100).toFixed(2);n.font="16px Arial",n.fillStyle="#333333",n.fillText(e,a.center.x+5,a.center.y+.25*a.center.y),H=0,M=0}),111),k=!1,n.font="20px Arial",n.fillStyle="#333333",n.fillText(a.score,a.center.x-.01*a.center.x,a.center.y+.06*a.center.y),n.beginPath(),n.arc(a.center.x,a.center.y,a.stageHeight,0,2*Math.PI),n.fillStyle="rgba(0,0,0,0.2)",n.fill(),x(p),x(y);else{S.die=!1,e.die=!0;var i=e.r/15;S.r+=i,S.nature.r+=i,S.nature.minR+=i,S.nature.maxR+=i,a.score+=Math.ceil(i/5)}})),c(S.x,S.y,S.r,S.color,!0),u(S.nature),c(S.x,S.y,S.nature.r,S.nature.color,!1),w.forEach((function(e,t){e.cheakBoll(),(e.okOver||e.die)&&w.splice(t,1)})),n.font="30px Arial",n.fillStyle="#333333",n.fillText("个数:"+a.score,10,50)}var k=!1;var H=0,M=0;var R=setInterval((function(){n.clearRect(0,0,a.stageWidth,a.stageHeight),s(),k?F():m()}),30);i.onclick=function(e){var t=e.offsetX>=d.x&&e.offsetX<=d.x+d.width,r=e.offsetY>=d.y&&e.offsetY<=d.y+d.height;t&&r&&(k=!0),Math.abs(event.offsetX-a.center.x)<S.r&&Math.abs(event.offsetY-a.center.y)<S.r&&(i.onmousemove=function(e){S.x=e.offsetX,S.y=e.offsetY}),navigator.maxTouchPoints&&(i.ontouchmove=function(e){S.x=e.touches[0].pageX,S.y=e.touches[0].pageY});var o=e.offsetX>=p.x&&e.offsetX<=p.x+p.width,h=e.offsetY>=p.y&&e.offsetY<=p.y+p.height;o&&h&&(a.score=0,S=new _,w=[],console.log(w),R=setInterval((function(){n.clearRect(0,0,a.stageWidth,a.stageHeight),s(),k?F():m()}),30))}}]);